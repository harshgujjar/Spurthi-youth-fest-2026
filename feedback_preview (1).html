<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feedback Form â€” Exact Visitor Preview</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif; background:linear-gradient(135deg,#c44569 0%,#6a1b9a 100%); min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; padding:20px; }

  /* Top info bar */
  .info-bar { width:100%; max-width:660px; background:rgba(255,255,255,0.15); border:2px dashed rgba(255,255,255,0.5); border-radius:12px; padding:12px 18px; margin-bottom:18px; color:white; display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
  .info-bar span { font-size:0.88em; font-weight:600; }
  .badge { background:rgba(255,255,255,0.25); padding:3px 12px; border-radius:20px; font-size:0.8em; font-weight:700; }

  /* Overlay simulation */
  .overlay-sim { width:100%; max-width:660px; }

  /* Modal */
  .modal { background:white; border-radius:20px; box-shadow:0 12px 50px rgba(0,0,0,0.4); overflow:hidden; position:relative; }

  /* Header */
  .modal-header { background:linear-gradient(135deg,#880e4f,#c2185b,#e91e63); padding:24px 28px; color:white; position:relative; }
  .modal-header h2 { margin:0 0 4px; font-size:1.4em; }
  .modal-header p { margin:0; opacity:0.9; font-size:0.9em; }
  .close-btn { position:absolute; top:16px; right:16px; background:rgba(255,255,255,0.2); color:white; border:none; border-radius:50%; width:32px; height:32px; font-size:1.1em; cursor:pointer; font-weight:700; display:flex; align-items:center; justify-content:center; transition:background 0.2s; }
  .close-btn:hover { background:rgba(255,255,255,0.35); }

  /* Dismiss note */
  .dismiss-note { background:#fff8e1; border-left:4px solid #ffc107; padding:10px 14px; font-size:0.83em; color:#856404; font-weight:600; display:flex; align-items:center; gap:8px; }

  /* Body */
  .modal-body { padding:24px 28px; }

  /* Form fields */
  .field { margin-bottom:18px; }
  .field label { font-weight:700; color:#555; font-size:0.95em; display:block; margin-bottom:6px; }
  .field input[type="text"], .field textarea { width:100%; padding:11px 14px; border:2px solid #f48fb1; border-radius:10px; font-size:0.95em; box-sizing:border-box; outline:none; font-family:inherit; transition:border 0.2s; }
  .field input[type="text"]:focus, .field textarea:focus { border-color:#c2185b; }
  .field textarea { resize:vertical; }
  .required { color:#c2185b; }

  /* Score section */
  .score-section { margin-bottom:22px; background:#fce4ec; padding:16px; border-radius:12px; border-left:4px solid #e91e63; }
  .score-section label { font-weight:700; color:#880e4f; font-size:0.95em; display:block; margin-bottom:12px; }
  .score-row { display:flex; gap:8px; flex-wrap:wrap; }
  .score-btn { width:40px; height:40px; border-radius:50%; border:2px solid; background:white; font-weight:800; font-size:0.95em; cursor:pointer; transition:all 0.2s; }
  .score-btn:hover { transform:scale(1.1); }

  /* Event ratings */
  .events-section { margin-bottom:22px; }
  .events-section h4 { color:#4a148c; margin:0 0 12px; font-size:1em; }
  .event-card { background:#f8f9fa; border-radius:10px; padding:12px 14px; margin-bottom:10px; border:1px solid #e0e0e0; transition:border 0.2s; }
  .event-card:hover { border-color:#9c27b0; }
  .event-name { font-weight:700; color:#333; margin-bottom:8px; font-size:0.93em; }
  .star-row { display:flex; gap:4px; }
  .star-btn { width:36px; height:36px; font-size:1.3em; background:none; border:none; cursor:pointer; transition:transform 0.1s; line-height:1; }
  .star-btn:hover { transform:scale(1.2); }

  /* Recommend section */
  .recommend-section { margin-bottom:22px; background:#e8f5e9; padding:16px; border-radius:12px; border-left:4px solid #43a047; }
  .recommend-section label { font-weight:700; color:#2e7d32; font-size:0.95em; display:block; margin-bottom:12px; }
  .recommend-btns { display:flex; gap:10px; flex-wrap:wrap; }
  .rec-btn { padding:10px 24px; border:2px solid; border-radius:20px; background:white; font-weight:700; cursor:pointer; font-size:0.95em; transition:all 0.2s; }
  .rec-yes { border-color:#43a047; color:#2e7d32; }
  .rec-maybe { border-color:#ff9800; color:#e65100; }
  .rec-no { border-color:#f44336; color:#c62828; }
  .rec-btn:hover { transform:scale(1.03); }
  .rec-btn.selected-yes { background:#43a047; color:white; transform:scale(1.05); }
  .rec-btn.selected-maybe { background:#ff9800; color:white; transform:scale(1.05); }
  .rec-btn.selected-no { background:#f44336; color:white; transform:scale(1.05); }

  /* Suggestions */
  .suggestions-section { margin-bottom:22px; }

  /* Submit */
  .submit-btn { width:100%; background:linear-gradient(135deg,#880e4f,#c2185b,#e91e63); color:white; border:none; border-radius:12px; padding:15px; font-size:1.1em; font-weight:700; cursor:pointer; box-shadow:0 4px 15px rgba(194,24,91,0.4); letter-spacing:0.5px; transition:opacity 0.2s; font-family:inherit; }
  .submit-btn:hover { opacity:0.92; }
  .footnote { text-align:center; color:#aaa; font-size:0.8em; margin-top:10px; }

  /* Error msg */
  .error-msg { background:#fde8e8; color:#c62828; padding:10px 14px; border-radius:8px; font-weight:600; font-size:0.9em; margin-bottom:12px; border:1.5px solid #f5c6cb; display:none; }
  .error-msg.show { display:block; }

  /* Success overlay */
  .success-overlay { display:none; text-align:center; padding:40px 20px; }
  .success-overlay.show { display:block; }
  .success-icon { font-size:4em; margin-bottom:16px; }
  .success-overlay h3 { color:#2e7d32; font-size:1.4em; margin-bottom:8px; }
  .success-overlay p { color:#555; margin-bottom:20px; }
  .success-close { background:linear-gradient(135deg,#880e4f,#c2185b); color:white; border:none; border-radius:10px; padding:12px 28px; font-size:1em; font-weight:700; cursor:pointer; font-family:inherit; }

  /* Dismiss simulation toggle */
  .sim-controls { width:100%; max-width:660px; margin-top:16px; background:rgba(255,255,255,0.12); border-radius:12px; padding:14px 18px; color:white; }
  .sim-controls h4 { font-size:0.88em; margin-bottom:10px; opacity:0.9; }
  .sim-btns { display:flex; gap:8px; flex-wrap:wrap; }
  .sim-btn { padding:7px 16px; border-radius:20px; border:2px solid rgba(255,255,255,0.5); background:rgba(255,255,255,0.1); color:white; font-size:0.82em; font-weight:700; cursor:pointer; transition:all 0.2s; }
  .sim-btn:hover, .sim-btn.active { background:rgba(255,255,255,0.3); }

  @keyframes slideInUp { from { opacity:0; transform:translateY(16px); } to { opacity:1; transform:translateY(0); } }
  .modal { animation:slideInUp 0.35s ease; }
</style>
</head>
<body>

<!-- Info bar -->
<div class="info-bar">
  <span>ğŸ‘ï¸ <strong>EXACT VISITOR PREVIEW</strong> â€” This is how the feedback popup looks to every visitor</span>
  <span class="badge">Fully Interactive</span>
  <span class="badge" id="dismissBadge">1st Show â€” Dismissible</span>
</div>

<!-- Modal -->
<div class="overlay-sim">
  <div class="modal" id="mainModal">

    <!-- Header -->
    <div class="modal-header">
      <h2>ğŸ“‹ Spurthi Youth Fest 2026 â€” Feedback</h2>
      <p>Your feedback helps us make next year even better! ğŸ‰</p>
      <button class="close-btn" id="closeBtn" onclick="handleClose()" title="Close">âœ•</button>
    </div>

    <!-- Dismiss note (shown on 2nd appearance) -->
    <div class="dismiss-note" id="dismissNote" style="display:none">
      âš ï¸ <span>You dismissed this earlier. Please fill the form to continue â€” this is required.</span>
    </div>

    <!-- Form body -->
    <div class="modal-body" id="formBody">

      <!-- Q1: Name -->
      <div class="field">
        <label>ğŸ‘¤ Your Name <span class="required">*</span></label>
        <input type="text" id="fbName" placeholder="Enter your name...">
      </div>

      <!-- Q2: Class -->
      <div class="field">
        <label>ğŸ« Class / Designation</label>
        <input type="text" id="fbClass" placeholder="e.g. III BCA A / Faculty / Visitor">
      </div>

      <!-- Q3: Overall Score -->
      <div class="score-section">
        <label>ğŸ“ Overall Fest Experience (1 = Poor, 10 = Excellent) <span class="required">*</span></label>
        <div class="score-row" id="scoreRow"></div>
        <input type="hidden" id="fbOverallScore">
      </div>

      <!-- Q4: Event Star Ratings -->
      <div class="events-section">
        <h4>â­ Rate Each Event (1â€“5 Stars)</h4>
        <div id="eventRatingsList"></div>
      </div>

      <!-- Q5: Recommend -->
      <div class="recommend-section">
        <label>ğŸ¯ Would you recommend Spurthi Youth Fest to others? <span class="required">*</span></label>
        <div class="recommend-btns">
          <button class="rec-btn rec-yes" onclick="setRecommend('yes',this)">ğŸ‘ Yes!</button>
          <button class="rec-btn rec-maybe" onclick="setRecommend('maybe',this)">ğŸ¤” Maybe</button>
          <button class="rec-btn rec-no" onclick="setRecommend('no',this)">ğŸ‘ No</button>
        </div>
        <input type="hidden" id="fbRecommend">
      </div>

      <!-- Q6: Suggestions -->
      <div class="suggestions-section field">
        <label>ğŸ’¬ Suggestions / Comments (Optional)</label>
        <textarea id="fbSuggestions" rows="3" placeholder="Any suggestions to improve next year's fest? We'd love to hear from you!"></textarea>
      </div>

      <!-- Error -->
      <div class="error-msg" id="errorMsg"></div>

      <!-- Submit -->
      <button class="submit-btn" onclick="handleSubmit()">ğŸš€ Submit Feedback</button>
      <p class="footnote">Your response is anonymous and helps us improve! ğŸ’ª</p>
    </div>

    <!-- Success Screen -->
    <div class="success-overlay" id="successOverlay">
      <div class="success-icon">ğŸ‰</div>
      <h3 id="thankYouName">Thank You!</h3>
      <p>Your feedback has been recorded. We truly appreciate your time! ğŸ’ª</p>
      <button class="success-close" onclick="resetForm()">âœ… Close</button>
    </div>

  </div>
</div>

<!-- Simulation Controls -->
<div class="sim-controls">
  <h4>ğŸ›ï¸ Simulate different visitor states (for preview only):</h4>
  <div class="sim-btns">
    <button class="sim-btn active" id="btn1st" onclick="setDismissState(0)">1st Time Visitor â€” Can Dismiss</button>
    <button class="sim-btn" id="btn2nd" onclick="setDismissState(1)">2nd Time â€” Must Fill (No Close)</button>
    <button class="sim-btn" id="btnLoggedIn" onclick="autoFill()">âœï¸ Auto-fill (Logged-in Student)</button>
    <button class="sim-btn" id="btnReset" onclick="resetForm()">ğŸ”„ Reset Form</button>
  </div>
</div>

<script>
  // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let dismissCount = 0;
  let selectedScore = 0;
  let selectedRecommend = '';
  let starRatings = {};

  const EVENTS = [
    'Social Awareness Skit',
    'Mad Ads',
    'YouTube Advertisement',
    'Case Analysis',
    'Vlog',
    'Podcast',
    'Hand Writing',
    'Talent Hunt',
    'Best Out of Waste',
    'Interdisciplinary',
    'Quiz',
    'Speed Slide Challenge',
    'Nukkad Natak'
  ];

  // â”€â”€ Build Score Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function buildScoreButtons() {
    const row = document.getElementById('scoreRow');
    row.innerHTML = '';
    for (let i = 1; i <= 10; i++) {
      const color = i <= 3 ? '#f44336' : i <= 6 ? '#ff9800' : i <= 8 ? '#66bb6a' : '#2e7d32';
      const btn = document.createElement('button');
      btn.className = 'score-btn';
      btn.textContent = i;
      btn.style.borderColor = color;
      btn.style.color = color;
      btn.dataset.score = i;
      btn.onclick = () => setScore(i);
      row.appendChild(btn);
    }
  }

  function setScore(score) {
    selectedScore = score;
    document.getElementById('fbOverallScore').value = score;
    const btns = document.querySelectorAll('.score-btn');
    btns.forEach(b => {
      const n = parseInt(b.dataset.score);
      const color = n <= 3 ? '#f44336' : n <= 6 ? '#ff9800' : n <= 8 ? '#66bb6a' : '#2e7d32';
      b.style.background = n <= score ? color : 'white';
      b.style.color = n <= score ? 'white' : color;
      b.style.transform = n === score ? 'scale(1.15)' : 'scale(1)';
      b.style.boxShadow = n === score ? `0 3px 10px ${color}55` : 'none';
    });
  }

  // â”€â”€ Build Event Ratings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function buildEventRatings() {
    const list = document.getElementById('eventRatingsList');
    list.innerHTML = '';
    EVENTS.forEach((ev, idx) => {
      const card = document.createElement('div');
      card.className = 'event-card';
      card.innerHTML = `
        <div class="event-name">ğŸ“Œ ${ev}</div>
        <div class="star-row" id="stars_${idx}">
          ${[1,2,3,4,5].map(s => `<button class="star-btn" onclick="setStar(${idx},'${ev.replace(/'/g,"\\'")}',${s})" title="${s} star${s>1?'s':''}">â˜†</button>`).join('')}
        </div>`;
      list.appendChild(card);
    });
  }

  function setStar(idx, eventName, stars) {
    starRatings[eventName] = stars;
    const row = document.getElementById('stars_' + idx);
    if (!row) return;
    row.querySelectorAll('.star-btn').forEach((b, i) => {
      b.textContent = i < stars ? 'â­' : 'â˜†';
      b.style.transform = i < stars ? 'scale(1.05)' : 'scale(1)';
    });
  }

  // â”€â”€ Recommend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setRecommend(val, btn) {
    selectedRecommend = val;
    document.getElementById('fbRecommend').value = val;
    document.querySelectorAll('.rec-btn').forEach(b => {
      b.classList.remove('selected-yes','selected-maybe','selected-no');
      b.style.transform = 'scale(1)';
    });
    btn.classList.add('selected-' + val);
  }

  // â”€â”€ Submit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function handleSubmit() {
    const name = document.getElementById('fbName').value.trim();
    const score = document.getElementById('fbOverallScore').value;
    const recommend = document.getElementById('fbRecommend').value;
    const errEl = document.getElementById('errorMsg');

    if (!name) { showError('âš ï¸ Please enter your name.'); return; }
    if (!score) { showError('âš ï¸ Please rate the overall fest experience (1â€“10).'); return; }
    if (!recommend) { showError('âš ï¸ Please answer the recommendation question.'); return; }

    errEl.classList.remove('show');

    // Show success
    const thankYou = document.getElementById('thankYouName');
    thankYou.textContent = 'Thank You, ' + name + '!';
    document.getElementById('formBody').style.display = 'none';
    document.getElementById('successOverlay').classList.add('show');
    document.getElementById('closeBtn').style.display = 'none';
    document.getElementById('dismissNote').style.display = 'none';
  }

  function showError(msg) {
    const el = document.getElementById('errorMsg');
    el.textContent = msg;
    el.classList.add('show');
    el.scrollIntoView({ behavior:'smooth', block:'nearest' });
    setTimeout(() => el.classList.remove('show'), 4000);
  }

  // â”€â”€ Close behavior â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function handleClose() {
    if (dismissCount >= 1) return; // blocked on 2nd
    // Simulate dismiss â€” show 2nd state
    setTimeout(() => setDismissState(1), 800);
  }

  // â”€â”€ Dismiss state simulation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setDismissState(count) {
    dismissCount = count;
    const closeBtn = document.getElementById('closeBtn');
    const dismissNote = document.getElementById('dismissNote');
    const badge = document.getElementById('dismissBadge');

    document.querySelectorAll('.sim-btn').forEach(b => b.classList.remove('active'));

    if (count === 0) {
      closeBtn.style.display = 'flex';
      dismissNote.style.display = 'none';
      badge.textContent = '1st Show â€” Dismissible';
      badge.style.background = 'rgba(255,255,255,0.25)';
      document.getElementById('btn1st').classList.add('active');
    } else {
      closeBtn.style.display = 'none';
      dismissNote.style.display = 'flex';
      badge.textContent = '2nd Show â€” Must Fill âš ï¸';
      badge.style.background = 'rgba(255,165,0,0.5)';
      document.getElementById('btn2nd').classList.add('active');
    }
  }

  // â”€â”€ Auto-fill simulation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function autoFill() {
    document.getElementById('fbName').value = 'Rahul Kumar';
    document.getElementById('fbClass').value = 'III BCA A';
    document.getElementById('btnLoggedIn').classList.add('active');
    setTimeout(() => document.getElementById('btnLoggedIn').classList.remove('active'), 1000);
  }

  // â”€â”€ Reset form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function resetForm() {
    document.getElementById('fbName').value = '';
    document.getElementById('fbClass').value = '';
    document.getElementById('fbOverallScore').value = '';
    document.getElementById('fbRecommend').value = '';
    document.getElementById('fbSuggestions').value = '';
    document.getElementById('errorMsg').classList.remove('show');
    document.getElementById('formBody').style.display = 'block';
    document.getElementById('successOverlay').classList.remove('show');
    document.getElementById('closeBtn').style.display = 'flex';

    selectedScore = 0;
    selectedRecommend = '';
    starRatings = {};

    buildScoreButtons();
    buildEventRatings();
    setDismissState(0);
  }

  // â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  buildScoreButtons();
  buildEventRatings();
</script>
</body>
</html>
